#!/bin/zsh

# Usage: omacase-theme-set <theme-name>

if [[ -z $1 && $1 != "CNCLD" ]]; then
  echo "Usage: omacase-theme-set <theme-name>" >&2
  exit 1
fi

THEMES_DIR="$HOME/.config/omacase/themes"
CURRENT_THEME_DIR="$HOME/.config/omacase/current/theme"

THEME_NAME=$(echo "$1" | sed -E 's/<[^>]+>//g' | tr '[:upper:]' '[:lower:]' | tr ' ' '-')
THEME_PATH="$THEMES_DIR/$THEME_NAME"

if [[ ! -d $THEME_PATH ]]; then
  echo -e "Theme '$THEME_NAME' does not exist in $THEMES_DIR" >&2
  exit 2
fi

ln -snf $THEME_PATH $CURRENT_THEME_DIR

omacase-theme-bg-next
